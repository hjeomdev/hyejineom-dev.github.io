---
layout: post
title:  "2021년 9월 TIL"
date:   2021-09-01 21:03:36 +0530
categories: TIL
---

# 🗓 9월 2일

## Rails Error: Rails: ActiveSupport::MessageEncryptor::InvalidMessage

#### 🌊 문제 상황

Rails Error: Rails: ActiveSupport::MessageEncryptor::InvalidMessage

#### 🏊 원인

원인 불명

#### 🏄 해결 방법

1. credentials 지우기

```shell
rm -rf config/credentials.yml.enc
```

2. credential 생성

```shell
EDITOR="mate --wait" bin/rails credentials:edit
```

#### 📃 참조 문서

1. [뉴비데브](https://newbedev.com/rails-activesupport-messageencryptor-invalidmessage)





## Rails Error: ActiveRecord::DuplicateMigrationNameError

#### 🌊 문제 상황

```rail s``` 실행 후 오류메세지 출력

#### 🏊 원인

db/migrate 에 특정 테이블 생성 파일인 create_테이블명.rb 이 여러개 있다.

#### 🏄 해결 방법

둘중에 하나를 삭제한다.

#### 📃 참조 문서

1. [스택오버플로우](https://stackoverflow.com/questions/34983246/how-is-it-possible-to-get-activerecordduplicatemigrationnameerror-with-only)





## Rails: 콘솔로 DB 삭제하기

#### 🌊 문제 상황

이전 테이블을 삭제해야한다. 

migrate 파일을 추가해서 수정해야한다.

#### 🏊 원인

DB ```bin/rails db:migrate```를 하는데 이미 존재하는 테이블이 있어서 에러가 발생한다.

#### 🏄 해결 방법

migrate 파일을 추가하는 방법도 있지만, 새로운 방법을 알게되었다.

1. ```rails console``` 으로 루비 콘솔 실행
2. ```ActiveRecord::Migration.drop_table(:table_name)``` 입력

#### 📃 참조 문서

1. [스택오버플로우](https://stackoverflow.com/questions/4020131/rails-db-migration-how-to-drop-a-table)





---

# 🗓 9월 3일

## Rails: Embed PDF

#### 🏔 문제 상황

웹 페이지 내에 pdf를 게시하고 싶음

#### 🏂 구현 방법 (2가지)

##### 1. 파일경로 하드코딩

- html.erb

  ```html
  ...
  <div>
    <embed src="../pdf/test.pdf#toolbar=0" type="application/pdf" width="100%" height="600px">
  </div>
  ...
	```



##### 2. 파일경로 유동적으로 코딩

- html.erb //미완

   ```html
   ...
   <%# <div>
     <embed src="...#toolbar=0" type="application/pdf" width="100%" height="600px">
   </div> %>
   ...
   ```

   

- controller 및 route 설정

  ```ruby
  Rails.application.routes.draw do
    ...
    get '/pdf/:title' => 'test#pdf'
    ...
  end
  
  ```

  ```ruby
  class TestController < ApplicationController
      ...
  
      def pdf
          pdf_filename = File.join(Rails.root, "pdf/" + params[:title] + ".pdf")
  
         # 게시용   
          send_file(pdf_filename, :filename => params[:title] + ".pdf", :disposition => 'inline', :type => "application/pdf")
      end
  
          # 다운로드 용
          send_file(pdf_filename, :filename => "your_document.pdf", :type => "application/pdf")
      end
  
      ...
  end
  ```



#### 📃 참조 문서

1. [코덱스월드](https://www.codexworld.com/embed-pdf-document-file-in-html-web-page/)
2. [스택오버플로우](https://stackoverflow.com/questions/7500451/how-do-i-display-a-pdf-in-ror-ruby)





---

# 🗓 9월 9일

## Rails 6 + Bootstrap 5

### 🏔 문제 상황

부트스트랩에 JS가 작동이 안된다.

네비게이션바의 드롭다운이 작동하지 않는다.

### 🏂 구현 방법

아래는 [깃허브-부트스트랩 루비젬](https://github.com/twbs/bootstrap-rubygem/blob/master/README.md)을 번역한 내용이다


# Bootstrap Ruby Gem [![Build Status](https://travis-ci.org/twbs/bootstrap-rubygem.svg?branch=master)](https://travis-ci.org/twbs/bootstrap-rubygem) [![Gem](https://img.shields.io/gem/v/bootstrap.svg)](https://rubygems.org/gems/bootstrap)

Ruby on Rails (*Sprockets*) 와 Hanami(이전에는 Lotus였음) 에서 사용할 수 있는 [Bootstrap 5][bootstrap-home] 루비젬.

For Sass versions of Bootstrap 3 and 2 see [bootstrap-sass](https://github.com/twbs/bootstrap-sass) instead.

**Ruby on Rails 6 Note:**: 
With the release of Rails 6 there have been some minor changes made to the default configuration for The Asset Pipeline. In specific, by default _Sprockets no longer processes JavaScript_ and instead Webpack is set as the default. The `twbs/bootstrap-rubygem` is for use with Sprockets not Webpack.

## Installation

Please see the appropriate guide for your environment of choice:

* [Ruby on Rails 4+](#a-ruby-on-rails) or other Sprockets environment.
* [Other Ruby frameworks](#b-other-ruby-frameworks) not on Rails.


### a. Ruby on Rails

Add `bootstrap` to your Gemfile:

```ruby
gem 'bootstrap', '~> 5.1.0'
```

Ensure that `sprockets-rails` is at least v2.3.2.

`bundle install` and restart your server to make the files available through the pipeline.

Import Bootstrap styles in `app/assets/stylesheets/application.scss`:

```scss
// Custom bootstrap variables must be set or imported *before* bootstrap.
@import "bootstrap";
```

The available variables can be found [here](assets/stylesheets/bootstrap/_variables.scss).

Make sure the file has `.scss` extension (or `.sass` for Sass syntax). If you have just generated a new Rails app,
it may come with a `.css` file instead. If this file exists, it will be served instead of Sass, so rename it:

```console
$ mv app/assets/stylesheets/application.css app/assets/stylesheets/application.scss
```

Then, remove all the `*= require` and `*= require_tree` statements from the Sass file. Instead, use `@import` to import Sass files.

Do not use `*= require` in Sass or your other stylesheets will not be able to access the Bootstrap mixins and variables.

Bootstrap JavaScript can optionally use jQuery.
If you're using Rails 5.1+, you can add the `jquery-rails` gem to your Gemfile:

```ruby
gem 'jquery-rails'
```

Bootstrap tooltips and popovers depend on [popper.js] for positioning.
The `bootstrap` gem already depends on the
[popper_js](https://github.com/glebm/popper_js-rubygem) gem.

Add Bootstrap dependencies and Bootstrap to your `application.js`:

```js
//= require jquery3
//= require popper
//= require bootstrap-sprockets
```

While `bootstrap-sprockets` provides individual Bootstrap components
for ease of debugging, you may alternatively require
the concatenated `bootstrap` for faster compilation:

```js
//= require jquery3
//= require popper
//= require bootstrap
```

### b. Other Ruby frameworks

If your framework uses Sprockets or Hanami,
the assets will be registered with Sprockets when the gem is required,
and you can use them as per the Rails section of the guide.

Otherwise you may need to register the assets manually.
Refer to your framework's documentation on the subject.

## Configuration

### Sass: Autoprefixer

Bootstrap requires the use of [Autoprefixer][autoprefixer].
[Autoprefixer][autoprefixer] adds vendor prefixes to CSS rules using values from [Can I Use](http://caniuse.com/).

If you are using bootstrap with Rails, autoprefixer is set up for you automatically.
Otherwise, please consult the [Autoprefixer documentation][autoprefixer].

### Sass: Individual components

By default all of Bootstrap is imported.

You can also import components explicitly. To start with a full list of modules copy
[`_bootstrap.scss`](assets/stylesheets/_bootstrap.scss) file into your assets as `_bootstrap-custom.scss`.
Then comment out components you do not want from `_bootstrap-custom`.
In the application Sass file, replace `@import 'bootstrap'` with:

```scss
@import 'bootstrap-custom';
```

[bootstrap-home]: https://getbootstrap.com
[bootstrap-variables.scss]: https://github.com/twbs/bootstrap-rubygem/blob/master/templates/project/_bootstrap-variables.scss
[autoprefixer]: https://github.com/ai/autoprefixer
[popper.js]: https://popper.js.org





4



Had same problem! Heroku needs both solutions mention above:

layouts>application.html.erb

```bash
stylesheet_pack_tag "application", media: 'all', 'data-turbolinks-track': 'reload'
```

-and-

assets/stylesheets/application.scss

-or- (where ever your main stylesheet exists)

assets/javascript/stylesheets/application.scss

```scss
@import "bootstrap/scss/bootstrap.scss";
```

You'll notice that your local dev server will need the `<%= stylesheet_link_tag ... %>`

just switch it out for the `<%= stylesheet_pack_tag ... %>` when pushing to Heroku for production.

Hope this clarifies :)





### 📃 참조 문서

1. [깃허브-부트스트랩 루비젬](https://github.com/twbs/bootstrap-rubygem/blob/master/README.md)



## 부트스트랩 네비게이션바 아이템 위치 

[스택오버플로우](https://stackoverflow.com/questions/19733447/bootstrap-navbar-with-left-center-or-right-aligned-items)







---

# 🗓 9월 15일

## [Docker](https://www.docker.com/)

docker images 

docker rmi httpd

docker pull httpd

docker run 

docker stop

docker start

docker rm 

docker ps

docker ps -a

docker run --name ws3 -p 80:80 httpd == docker run -publish 80:80 httpd

docker exec 컨테이너 pwd

docker exec 컨테이너 ls

docker exec 컨테이너 /bin/sh 

docker exec -it 컨테이너 /bin/sh == docker exec --interactive --tty 컨테이너 /bin/sh 

docker exec -it 컨테이너 /bin/bash == docker exec --interactive --tty 컨테이너 /bin/bash 

docker run -p 8888:80 -v ~/Desktop/htdocs:/usr/local/apache2/htdocs/ httpd



#### 📃 참조 영상: [생활코딩 - 도커 입문](https://www.youtube.com/playlist?list=PLuHgQVnccGMDeMJsGq2O-55Ymtx0IdKWf)



# 🗓 9월 16일

## [rails API](https://api.rubyonrails.org/)

### .fourth 함수 오류



---

[ 에러 해결 레이아웃]

### 🌊 문제 상황

### 🏊 원인

### 🏄 해결 방법

### 📃 참조 문서

[ 기능 구현 레이아웃 ]

### 🏔 문제 상황

### 🏂 구현 방법

### 📃 참조 문서

