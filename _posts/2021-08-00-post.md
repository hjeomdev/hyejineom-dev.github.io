---
layout: post
title:  "2021년 8월"
date:   2021-08-01 12:59:59 +0900
categories: TIL
---

# 🗓 8월 1일
## 유니티 안드로이드 빌드 에러 해결 Unity Android Build Error Solved
[AAPT: error: unexpected element found in 에러 해결](https://ajh322.tistory.com/294)
역시 사람은 에러메세지를 꼼꼼히 봐야 해....

---

# 🗓 8월 2일
## SocketIO 라이브러리
며칠째 채팅방 구현을 하고 있는데 사실 공식문서를 읽다보면 너무 오래걸릴 거 같아서 열심히 안보고 다른 블로그글만 보고 따라 하고 있었다.
진행하는데 한계가 느껴지고 이제 더이상 여유롭게 할 수가 없어서 이제 공식문서를 독파하려고 한다...
[SocketIO 공식문서](https://socket.io/)
[SocketIO를 이용한 실시간채팅 서비스 예시1](https://github.com/aamirjaved844/ReactSocketChat)
[SocketIO를 이용한 실시간채팅 서비스 예시2](https://github.com/safak/youtube/tree/chat-app)
[SocketIO를 이용한 실시간채팅 서비스 예시3](https://www.fullstacklabs.co/blog/chat-application-react-express-socket-io)
[SocketIO를 이용한 실시간채팅 서비스 예시4](https://github.com/WebDevSimplified/Realtime-Chat-App-With-Rooms)
[SocketIO를 이용한 실시간채팅 서비스 예시5](https://github.com/WebDevSimplified/Realtime-Simple-Chat-App)

---

# 🗓 8월 3일
## @socket.io-ui
```npm i @socket.io-ui```로 설치하고 https://admin.socket.io 에 접속하면 현재 존재하는 소켓과 룸, 클라이언트, 서버의 현황을 확인할 수 있다.

## JS로 로컬 스토리지 이용
[관련 블로그](https://www.daleseo.com/js-web-storage/)

---

# 🗓 8월 5일
## 레일즈 partial 관련 내용
[관련 블로그](https://flearning-blog.tistory.com/39?category=646783)

## 레일즈 js관련
[관련 블로그](https://brandonhilkert.com/blog/page-specific-javascript-in-rails/)

---

# 🗓 8월 6일
## 레일즈
- 레일즈 버전 : 6
### 레일즈 헤더, 푸터 분리
레일즈 뷰는 views/layouts/application.html.erb를 베이스로 다른 뷰의 코드를 추가해서 렌더링하는 형식을 띄는 듯하다.
(2019년 정도의 설명을 보면 application.html.erb파일이 views바로 아래에 있는 경우도 있다.)
다른 뷰들의 코드가 들어가는 곳은 application.html.erb의 <%= yield %> 부분이다.
그래서 application.html.erb에 <%= yield %> 앞뒤로 헤더와 푸더를 넣으면 다른 뷰에 반복해서 입력하지 않아도, 모든 뷰에 기본적으로 헤더와 푸더가 같이 렌더링된다.
<%= yield %>는 함수에서 미지수같은 표시라면, 헤더와 푸터는 정확히 정해져있는 지수이다.
그래서 <%= yield %>가 아닌 <%= render 'erb파일path' %>를 사용해야한다.
그래서 layouts 디렉토리 밑에 _header.html.erb, _footer.html.erb를 생성하고(앞에 _를 넣어줘야 인식한다) application.html.erb에 필요한 위치에 <%= render 'layouts/header' %>와 <%= render 'layouts/footer' %>를 입력한다(_header가 아닌 header라고 입력해야 인식한다).

### 레일즈 외부자바스크립트 연결
Webpack이라는 Gem으로 되는 거 같다.
프로젝트 생성시에 자동으로 설치된 gem이라서 따로 설치하지는 않았다.
app/javascript/packs밑에 사용할 js파일(custom.js라고 생성함)을 생성하고, app/javascript/packs/application.js 에 해당 파일이름을 입력한다.
```js
import Rails from "@rails/ujs"
import Turbolinks from "turbolinks"
import * as ActiveStorage from "@rails/activestorage"
import channels from "channels"
import custom from "packs/custom" # 사용할 js파일

Rails.start()
Turbolinks.start()
ActiveStorage.start()
```
다른 것들은 무슨 용도인지 잘 모르겠다.. 공부가 필요하다

그리고 js를 사용할 erb파일에 <%= javascript_pack_tag 'js파일명' %> 을 입력하면 자동으로 js파일명에 숫자를(아마도 버전을 표시하는 것 같다) 추가해서 erb파일에 렌더링한다.

---

# 🗓 8월 6일
## 로컬스토리지에 채팅메세지 저장하기
[로컬스토리지 공식문서](https://ko.javascript.info/localstorage)
로컬스토리지는 key-value 형태라서 데이터를 문자로 저장해야한다.
나는 저장할 데이터 형식이 json이라서, 해당 데이터를 텍스트로 바꿔서 저장하고 필요할 때 json으로 변환해서 사용해야한다.

---

# 🗓 8월 9일
## 레일즈 DB select 모든 레코드, 해당 데이터가 PK 값인 레코드, 특정 컬럼의 해당 데이터를 가지는 레코드
```ruby
@user = User.all # Users테이블에 모든 레코드 가져오기 (User는 모델명)
```
```ruby
@user = User.find(params[:userId]) # Users테이블에 userId에 해당하는 레코드 조회 
```
params는 http://localhost:3000/?userId=1 url의 userId의 값을 가져온다.
```ruby
@user = User.where("nickname = ?", @nickname) #User테이블에 nickname 컬럼에서 @nickname 값을 가지는 레코드 조회
```
